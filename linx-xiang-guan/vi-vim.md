# Vi/Vim

**vi**，visual interface，可视化界面，用来编辑Unix/Linux系统中默认的文件的编辑器

**vim**，vi improved，vi编辑器的增强版，由vim-enhanced软件包提供



使用vi/vim创建/修改文件

&#x20;   vi  新文件名          // 打开vi编辑器，并建立临时文件

&#x20;   三种工作模式：**命令模式、输入模式、末行模式**

&#x20;   按 **i** 键可以从 **命令模式** 切换到 **输入模式**

&#x20;   按 **ESC** 键可以从 **任何模式** 切换到 **命令模式**

&#x20;   按 **:** 键可以从 **命令模式** 切换到 **末行模式**

&#x20;   在末行模式下啊，常见的退出方式—— :wq 保存并退出，:q! 放弃保存并退出



执行 `yum -y install vim-enhanced` 安装增强版vim



**命令模式**中最常用的一些命令：

| 命令  | 作用                          |
| --- | --------------------------- |
| dd  | 删除（剪切）光标所在整行                |
| 5dd | 删除（剪切）从光标处开始的5行             |
| yy  | 复制光标所在整行                    |
| 5yy | 复制从光标处开始的5行                 |
| n   | 显示搜索命令定位到的下一个字符串            |
| N   | 显示搜索命令定位到的上一个字符串            |
| u   | 撤销上一步的操作                    |
| p   | 将之前删除（dd）或复制（yy）过的数据粘贴到光标后面 |

**`1、复制`**

`1）单行复制`

`在命令模式下，将光标移动到将要复制的行处，按“yy”进行复制；`

`2）多行复制 在命令模式下，将光标移动到将要复制的首行处，按“nyy”复制n行；其中n为1、2、3……`

【yy】 复制光标所在的那一行\
【nyy】 复制光标所在的向下n行

**`2、粘贴`**

`在命令模式下，将光标移动到将要粘贴的行处，按“p”进行粘贴`

【p,P】 p为将已经复制的数据在光标下一行粘贴；P为将已经复制的数据在光标上一行粘贴

**3、删除**

删除一行：dd

删除一个单词/光标之后的单词剩余部分：dw

删除当前字符：x

光标之后的该行部分：d$

文本删除

dd 删除一行

d$ 删除以当前字符开始的一行字符

ndd 删除以当前行开始的n行

dw 删除以当前字符开始的一个字

ndw 删除以当前字符开始的n个字

**4、查找**

【/word】 在文件中查找内容为word的字符串（向下查找）\
【?word】 在文件中查找内容为word的字符串（向上查找）\
【\[n]】 表示重复查找动作，即查找下一个\
【\[N]】 反向查找下一个

搜索后，我们打开别的文件，发现也被高亮了，怎么关闭高亮？

命令模式下，输入:nohlsearch  也可以:set nohlsearch； 当然，可以简写，noh或者set noh。

**5、设置行号**

如果编辑后，又想显示行号，同样操作按一下esc键，并输入:（冒号），输入set number    ，并按回车键，完成后即显示行号

**6、跳到指定行**

在知道所查找的内容在文件中的具体位置时可以使用以下命令直接定位：\
跳到文件指定行：比如跳到66行

66+G（也就是66+shift+g）\
当然你可以选择另一种跳转方式：

命令行输入“ : n ” 然后回车\
跳到文件第一行：gg （两个小写的G）

跳到文件最后一行：shift+g （也就是G）\
**7、文件上下翻转**

页翻转可以直接使用PgUp和PgDn

向前滚动一屏：Ctrl+F

向后滚动一屏：Ctrl+B

向前滚动半屏：Ctrl+D（向下）

向后滚动半屏：Ctrl+U（向上）

向下滚动一行，保持当前光标不动：Ctrl+E

向上滚动一行，保持当前光标不动：Ctrl+Y

当前行滚动：\
当前行移动到屏幕顶部并滚动：Z+Enter\
滚动指定行到屏幕顶部： 10Z+Enter（指定第十行）\
当前行移动到屏幕中央并滚动：Z + .\
当前行移动到屏幕底部并滚动：Z + -\
当前屏幕操作：\
H：大写h，移动到当前屏幕首行；nH移动到首行下的第n行\
M：大写m，移动到当前屏幕中间行\
L：大写l，移动到当前屏幕末行；nL移动到末行上面的第n行\
**8、撤销上一步操作**

【u】 撤消上一个操作\
【\[Ctrl] + r】 多次撤消\
【.】 这是小数点键，重复上一个操作

&#x20; **缩进：**

&#x20; 插入模式下，ctrl+shift+d 减少缩进，ctrl+shift+t 增加缩进



**末行模式中最常用的一些命令：**

****

| 命令            | 作用                    |
| ------------- | --------------------- |
| :w            | 保存                    |
| :q            | 退出                    |
| :q!           | 强制退出（放弃对文档的修改内容）      |
| :wq!          | 强制保存退出                |
| :set nu       | 显示行号                  |
| :set nonu     | 不显示行号                 |
| :命令           | 执行该命令                 |
| :整数           | 跳转到该行                 |
| :s/one/two    | 将当前光标所在行的第一个one替换成two |
| :s/one/two/g  | 将当前光标所在行的所有one替换成two  |
| :%s/one/two/g | 将全文中的所有one替换成two      |
| ?字符串          | 在文本中从下至上搜索该字符串        |
| /字符串          | 在文本中从上至下搜索该字符串        |
